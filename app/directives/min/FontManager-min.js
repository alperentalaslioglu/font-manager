app.directive("fontManager",function(t,n){return{restrict:"E",templateUrl:"app/views/font-selector.html",scope:{placeholder:"@"},link:function(o,i,e){o.isFontSelected=!1,o.isFontsListShown=!1,o.listedFonts=[],o.buffer=[],o.current=0,o.page=1,o.limit=20,o.isLoading=!0,o.$on("fonts",function(t,n){o.isLoading=!1,o.fonts=n,o.selectedFont=n[0],o.loadFonts()}),o.loadFonts=function(){if(o.isLoading=!0,o.current<800){for(var t=o.current;t<o.page*o.limit;t++)o.listedFonts.push(o.fonts[t]),o.buffer.push(o.fonts[t]);o.current+=20,o.page++}n(function(){},1e3)},o.showFonts=function(){o.isFontsListShown=!0},t.on("click",function(t){o.isClickOutside(t)&&o.$apply(function(){o.isFontsListShown=!1,o.fontSearch=""})}),o.selectFont=function(t){o.selectedFont=t,o.isFontSelected=!0,o.isFontsListShown=!1},o.isClickOutside=function(t){for(var n=t.path,o=0;o<n.length;o++)if("manager"===n[o].id)return!1;return!0},o.type=function(t){""===t?(o.listedFonts=[],o.loadFonts()):o.listedFonts=o.fonts,o.isLoading=!1}}}});